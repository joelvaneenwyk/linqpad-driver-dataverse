<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- Common properties -->
  <PropertyGroup>
    <!-- SolutionDir is not defined when building projects explicitly -->
    <Configuration Condition=" '$(Configuration)' == '' ">Release</Configuration>

    <ProjectRoot Condition="Exists('$(MSBuildProjectDirectory)/Mycoshiro.Dataverse.LINQPad.sln')">$([System.IO.Path]::GetFullPath('$(MSBuildProjectDirectory)))</ProjectRoot>
    <ProjectRoot Condition="Exists('$(MSBuildProjectDirectory)/../Mycoshiro.Dataverse.LINQPad.sln')">$([System.IO.Path]::GetFullPath('$(MSBuildProjectDirectory)/../'))</ProjectRoot>

    <ProjectRootPrefix Condition="HasTrailingSlash('$(ProjectRoot)')">$(ProjectRoot)</ProjectRootPrefix>
    <ProjectRootPrefix Condition="!HasTrailingSlash('$(ProjectRoot)')">$(ProjectRoot)/</ProjectRootPrefix>

    <SolutionDir Condition="$(SolutionDir) == '' Or $(SolutionDir) == '*Undefined*'">$(ProjectRoot)</SolutionDir>
    <Deterministic>true</Deterministic>
    <SolutionDir Condition=" '$(SolutionDir)' == '' ">$([MSBuild]::GetDirectoryNameOfFileAbove($(MSBuildProjectDirectory), README.md))\</SolutionDir>

    <OutputPath>$(ProjectRootPrefix)bin/$(Configuration)/</OutputPath>
    <OutDir>$(OutputPath)/</OutDir>
    <BaseIntermediateOutputPath>$(ProjectRootPrefix).build/$(MSBuildProjectName)/</BaseIntermediateOutputPath>
    <BaseOutputPath>$(BaseIntermediateOutputPath)</BaseOutputPath>
    <IntermediateOutputPath>$(BaseIntermediateOutputPath)$(Configuration)/$(Platform)/</IntermediateOutputPath>
    <IntDir>$(BaseIntermediateOutputPath)$(Configuration)/$(Platform)/</IntDir>
    <UseCommonOutputDirectory>false</UseCommonOutputDirectory>
    <AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>

  </PropertyGroup>
</Project>
